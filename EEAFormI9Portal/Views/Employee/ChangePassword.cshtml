
@{
    ViewBag.Title = "ChangePassword";
}

<div class="container">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Change Password</h3>
        </div>
        <div class="panel-body">
            <span></span>
            <form>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="temppassword">Temporary Password</label>
                    <input type="password" id="temppassword" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="newpassword">New Password</label>
                    <input type="password" id="newpassword" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="confirmpassword">Confirm New Password</label>
                    <input type="password" id="confirmpassword" class="form-control" />
                </div>
                <div class="form-group">
                    <input type="submit" id="btnsubmit" class="form-control btn btn-primary" value="Submit"/>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="infoModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                @*<div class="modal-header" style="padding:35px 50px; background-color:powderblue;">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4>Add Representative</h4>
                </div>*@
                <div class="modal-body" style="padding:40px 50px;">
                    <div>
                        <p>
                            Your password has been reset. Please @Html.ActionLink("Click here to log in", "Login", "Account", routeValues: null, htmlAttributes: new { id = "loginLink" })
                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="btn_add_rep" type="submit" class="btn btn-info btn-default pull-right" data-dismiss="modal"> Close</button>
                </div>
            </div>

        </div>
    </div>
    <div class="modal fade" id="failModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                @*<div class="modal-header" style="padding:35px 50px; background-color:powderblue;">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4>Add Representative</h4>
                    </div>*@
                <div class="modal-body" style="padding:40px 50px;">
                    <div>
                        <p>
                            There is something wrong in changing password, please try after sometime.
                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="btn_add_rep" type="submit" class="btn btn-info btn-default pull-right" data-dismiss="modal"> Close</button>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    $('#btnsubmit').click(function () {
        var data = {
            "Email": $('#email').val(),
            "Code": $('#temppassword').val(),
            "Password": $('#newpassword').val(),
            "ConfirmPassword": $('#confirmpassword').val()
        }
        
        if ($('#newpassword').val() == $('#confirmpassword').val()) {
            $.post({
                url: '/Employee/ConfirmAccount',
                data: data,
                dataType: "json",
                async: false,
                success: function (result) {
                    if (result) {
                        //window.location.href = "http://localhost:50132/Account/Login";
                        $('#infoModal').modal('show');
                    }
                    else {
                        $('#failModal').modal('show');
                    }
                }
            });
        }
        else {
            alert('passwords does not match');
        }
    });
</script>


<div id="accordion" role="tablist" aria-multiselectable="true">
    <div class="card">
        <div class="card-header" role="tab" id="headingOne">
            <h5 class="mb-0">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                    Collapsible Group Item #1
                </a>
            </h5>
        </div>

        <div id="collapseOne" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
            <div class="card-block">
                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingTwo">
            <h5 class="mb-0">
                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    Collapsible Group Item #2
                </a>
            </h5>
        </div>
        <div id="collapseTwo" class="collapse" role="tabpanel" aria-labelledby="headingTwo">
            <div class="card-block">
                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" role="tab" id="headingThree">
            <h5 class="mb-0">
                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    Collapsible Group Item #3
                </a>
            </h5>
        </div>
        <div id="collapseThree" class="collapse" role="tabpanel" aria-labelledby="headingThree">
            <div class="card-block">
                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
            </div>
        </div>
    </div>
</div>